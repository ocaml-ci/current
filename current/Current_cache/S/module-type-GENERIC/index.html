<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>GENERIC (current.Current_cache.S.GENERIC)</title><link rel="stylesheet" href="../../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">current</a> &#x00BB; <a href="../../index.html">Current_cache</a> &#x00BB; <a href="../index.html">S</a> &#x00BB; GENERIC</nav><header class="odoc-preamble"><h1>Module type <code><span>S.GENERIC</span></code></h1><p>The most general API. <a href="../module-type-BUILDER/index.html"><code>BUILDER</code></a> and <a href="../module-type-PUBLISHER/index.html"><code>PUBLISHER</code></a> are just special cases of this.</p></header><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../module-type-OPERATION/index.html">OPERATION</a></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Extra context or configuration information (e.g. credentials to access a remote service).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-id"><a href="#val-id" class="anchor"></a><code><span><span class="keyword">val</span> id : string</span></code></div><div class="spec-doc"><p>A short and unique name for this operation, used as a filename component and database key. e.g. &quot;docker-build&quot;</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Key"><a href="#module-Key" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Key/index.html">Key</a></span><span> : <a href="../module-type-WITH_DIGEST/index.html">WITH_DIGEST</a></span></code></div><div class="spec-doc"><p>The <code>id, Key.t</code> pair uniquely identifies the operation.</p></div></div></details></div><div class="odoc-spec"><div class="spec module anchored" id="module-Value"><a href="#module-Value" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Value/index.html">Value</a></span><span> : <a href="../module-type-WITH_DIGEST/index.html">WITH_DIGEST</a></span></code></div><div class="spec-doc"><p>A second input value, which is not part of the key (so there can be only one value for any key at one time). For outputs, this is used to hold the value to which the output should be set. For builds, non-essential inputs can be placed here instead of in the key so that the old outcome can be latched for minor changes. For example, when testing a Git commit the commit to test would be the key, but the latest version of the test platform might be the value.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Outcome"><a href="#module-Outcome" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Outcome/index.html">Outcome</a></span><span> : <a href="../module-type-WITH_MARSHAL/index.html">WITH_MARSHAL</a></span></code></div><div class="spec-doc"><p>The output of the pipeline stage.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Current/Job/index.html#type-t">Current.Job.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="Key/index.html#type-t">Key.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="Value/index.html#type-t">Value.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Outcome/index.html#type-t">Outcome.t</a> <a href="../../../Current/index.html#type-or_error">Current.or_error</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>run t j k v</code> performs the operation. Call <code>Job.start j</code> once any required resources have been acquired. Log messages can be written to <code>j</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span>(<a href="Key/index.html#type-t">Key.t</a> * <a href="Value/index.html#type-t">Value.t</a>)</span> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div><div class="spec-doc"><p>Describe the operation. e.g. <code>&quot;docker push $tag&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-auto_cancel"><a href="#val-auto_cancel" class="anchor"></a><code><span><span class="keyword">val</span> auto_cancel : bool</span></code></div><div class="spec-doc"><p>This affects what happens if we're in the process of outputting a value and then we decide to output a different value instead. If <code>true</code>, the old operation will be cancelled immediately. If <code>false</code>, the old operation will run to completion first.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-latched"><a href="#val-latched" class="anchor"></a><code><span><span class="keyword">val</span> latched : bool</span></code></div><div class="spec-doc"><p>This controls what happens to the reported outcome while changing to a new value. If <code>true</code>, we continue to report the previous outcome until the new job is complete. If <code>false</code>, the output is set to active during the update.</p></div></div></div></body></html>