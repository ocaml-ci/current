<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Log_matcher (current.Current.Log_matcher)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">current</a> &#x00BB; <a href="../index.html">Current</a> &#x00BB; Log_matcher</nav><header class="odoc-preamble"><h1>Module <code><span>Current.Log_matcher</span></code></h1><p>Analysing job logs.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-rule"><a href="#type-rule" class="anchor"></a><code><span><span class="keyword">type</span> rule</span><span> = </span><span>{</span></code><ol><li id="type-rule.pattern" class="def record field anchored"><a href="#type-rule.pattern" class="anchor"></a><code><span>pattern : string;</span></code></li><li id="type-rule.report" class="def record field anchored"><a href="#type-rule.report" class="anchor"></a><code><span>report : string;</span></code></li><li id="type-rule.score" class="def record field anchored"><a href="#type-rule.score" class="anchor"></a><code><span>score : int;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-analyse_job"><a href="#val-analyse_job" class="anchor"></a><code><span><span class="keyword">val</span> analyse_job : <span><a href="../Job/index.html#type-t">Job.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>analyse_job j</code> scans the logs for <code>j</code> looking for known patterns. If it finds any, it returns the report string for the best one, and also logs information about all found patterns.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_rule"><a href="#val-add_rule" class="anchor"></a><code><span><span class="keyword">val</span> add_rule : <span><a href="#type-rule">rule</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Add a rule that matches log text against the PCRE <code>rule.pattern</code>. If it matches, the error will be <code>rule.report</code>. In <code>report</code>, &quot;\1&quot; is replaced by the first match group, etc. If multiple rules match, the one with the highest scrore is used. If two rules with the same score match, the first is used. If a rule already exists with the same pattern, it will be replaced.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_rule"><a href="#val-remove_rule" class="anchor"></a><code><span><span class="keyword">val</span> remove_rule : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <span>[&gt; `Rule_not_found ]</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>remove_rule pattern</code> removes a rule previously added by <code>add_rule</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_rules"><a href="#val-list_rules" class="anchor"></a><code><span><span class="keyword">val</span> list_rules : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-rule">rule</a> list</span></span></code></div><div class="spec-doc"><p>Get the current set of rules.</p></div></div></div></body></html>
